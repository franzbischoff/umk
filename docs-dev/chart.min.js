var options={chart:{height:"100%",type:"line",zoom:{enabled:!0,type:"xy",autoScaleYaxis:!1,zoomedArea:{fill:{color:"#90CAF9",opacity:.4},stroke:{color:"#0D47A1",opacity:.4,width:1}}},toolbar:{show:!0,offsetX:0,offsetY:0,tools:{download:'<i class="fas fa-download"></i>',selection:!1,zoom:!0,zoomin:!0,zoomout:!0,pan:!0,reset:'<i class="fas fa-compress"></i>'},autoSelected:"zoom"}},series:[{name:"sales",data:[{x:1,y:2},{x:2,y:4},{x:3,y:3},{x:4,y:5},{x:3,y:6},{x:2,y:4},{x:1,y:5},{x:0,y:7}]},{name:"prod",data:[{x:1,y:5},{x:2,y:6},{x:3,y:7},{x:4,y:5},{x:3,y:7},{x:2,y:5},{x:1,y:6},{x:0,y:7}]}],xaxis:{type:"numeric"}};const urlInfo={inText:null,info:null,getInText:function(){this.inText=decodeURI(window.location.search.substring(1))},getInfo:function(){this.info=JSON.parse2(packer.unpack(urlInfo.inText))},getLocale:function(){let t=this.info.lang;this.getJSON("dependencies/apexcharts/locales/"+t+".json",function(t,e){cItem.setLocale(e)})},getJSON:function(t,e){let o=new XMLHttpRequest;o.open("GET",t,!0),o.responseType="json",o.onload=function(){let t=o.status;e(200===t?null:t,o.response)},o.send()}},cItem={options:{chart:{animations:{enabled:!1},height:"100%",type:"line",zoom:{enabled:!0,type:"xy",autoScaleYaxis:!1,zoomedArea:{fill:{color:"#90CAF9",opacity:.4},stroke:{color:"#0D47A1",opacity:.4,width:1}}},toolbar:{show:!0,offsetX:0,offsetY:0,tools:{download:'<i class="fas fa-download"></i>',selection:!1,zoom:!0,zoomin:!0,zoomout:!0,pan:!0,reset:'<i class="fas fa-compress"></i>'},autoSelected:"zoom"},defaultLocale:"en"},markers:{size:0},series:[],xaxis:{type:"numeric",labels:{formatter:function(t,e,o){return math.parse(t).toString(4)}}}},showIm:!0,handle:null,setLocale:function(t){this.options.chart.locales||(this.options.chart.locales=[]),this.options.chart.locales.push(t),this.options.chart.defaultLocale=t.name,console.log(t),console.log(t.name),this.handle&&this.handle.updateOptions(this.options)},getData:function(){},prepareChart:function(){this.handle=new ApexCharts(document.querySelector("#chart"),this.options),this.handle.render()}},db={handle:null,cid:null,lastIdx:-1,connectDB:function(t){t||(t=urlInfo.info.db),Dexie.exists(t).then(function(e){e&&(db.handle=new Dexie(t),db.handle.version(1).stores({outs:"++k, t, b"}),db.lastIdx=-1)})},getData:function(){this.handle&&!this.handle.hasBeenClosed()?this.handle.outs.where("b").equals(this.cid).filter(function(t){return t.k>db.lastIdx}).sortBy("t",function(t){db.pDataNPlot(t)}):this.connectDB()},pDataNPlot:function(t){if(t.length>0){let e=[];for(let o=0;o<t.length;o++){let n=math.evaluate(t[o].v),a=0;n.forEach(function(n,s){o||(cItem.showIm?(e.push({name:"Re(["+(s[0]+1)+", "+(s[1]+1)+"])",data:[]}),e.push({name:"Im(["+(s[0]+1)+", "+(s[1]+1)+"])",data:[]})):e.push({name:"["+(s[0]+1)+", "+(s[1]+1)+"]",data:[]})),cItem.showIm?(e[a++].data.push([t[o].t,math.re(n)]),e[a++].data.push([t[o].t,math.im(n)])):e[a++].data.push([t[o].t,math.re(n)])})}if(this.lastIdx>0){for(let t=0;t<e.length;t++)delete e[t].name;cItem.handle.appendData(e)}else cItem.handle.updateSeries(e);let o=Math.max.apply(Math,t.map(function(t){return t.k}));o>=0&&(this.lastIdx=o),console.log(t)}}},packer={pack:function(t){let e=this.deflated16bit(t);return e=this.escZero(e),this.ab2str(e)},unpack:function(t){let e=new Uint16Array(this.str2ab(t));e=this.escZero(e,!1);let o=pako.inflate(e);return this.ab2str(o)},deflated16bit:function(t){let e=pako.deflate(t);return new Uint16Array(e)},escZero:function(t,e=!0){return t.map(t=>t+(e?3077:-3077))},ab2str:function(t){return String.fromCharCode.apply(null,new Uint16Array(t))},str2ab:function(t){let e=new ArrayBuffer(2*t.length),o=new Uint16Array(e);for(let e=0,n=t.length;e<n;e++)o[e]=t.charCodeAt(e);return e}};urlInfo.getInText(),urlInfo.getInfo(),urlInfo.getLocale(),cItem.prepareChart(),db.connectDB(),db.cid=urlInfo.info.v.cid,setInterval(()=>{db.getData()},100);