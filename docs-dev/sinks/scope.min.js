function prepareScope(){chart&&chart.dispose(),chart=am4core.create("scope",am4charts.XYChart);const e=chart.xAxes.push(new am4charts.ValueAxis),t=chart.yAxes.push(new am4charts.ValueAxis);e.padding(0,0,0,0),t.padding(0,0,0,0),chart.padding(0,32,10,0),chart.legend=new am4charts.Legend,chart.legend.position="top",chart.legend.itemContainers.template.paddingTop=0,chart.legend.itemContainers.template.paddingBottom=0,chart.legend.fontSize=10,chart.legend.useDefaultMarker=!0;var r=chart.legend.markers.template.children.getIndex(0);r.cornerRadius(12,12,12,12),r.strokeWidth=2,chart.cursor=new am4charts.XYCursor,chart.numberFormatter.numberFormat="##.###e",chart.cursor.behavior="zoomXY",prepareColors()}function updateData(e){chart||prepareScope();const t=[];let r=!0;for(let a=0;a<e.length;a++){const o={};o.t=e[a].t;for(let t=0;t<e[a].v[0].length;t++)for(let s=0;s<e[a].v[0][0].length;s++){const n="r_"+(t+1)+"_"+(s+1),c="i_"+(t+1)+"_"+(s+1);if(o[n]=e[a].v[0][t][s],o[c]=e[a].v[1][t][s],0===chart.data.length&&r){createANewSeries(n,"("+(t+1)+", "+(s+1)+")");const e=createANewSeries(c,"Img("+(t+1)+","+(s+1)+")");settings.showImg||(e.hidden=!0)}}t.push(o),r=!1}let a=chart.data.length+t.length-settings.limitData;a<0&&(a=0),chart.addData(t,a)}function adjustImagSeriesView(){if(chart){const e=chart.series.length/2;for(let t=0;t<e;t++)settings.showImg?chart.series.getIndex(2*t+1).show():chart.series.getIndex(2*t+1).hide()}}function prepareColors(){if(document.getElementsByTagName("html")[0].className=settings.mSettings.theme,chart){for(let e=0;e<chart.xAxes.length;e++)setAxisColorProperties(chart.xAxes.getIndex(e));for(let e=0;e<chart.yAxes.length;e++)setAxisColorProperties(chart.yAxes.getIndex(e));chart.zoomOutButton.background.cornerRadius(5,5,5,5),chart.zoomOutButton.background.fill=am4core.color(window.getComputedStyle(document.getElementById("css-ref-ele-1"),null).getPropertyValue("border-color")),chart.zoomOutButton.icon.stroke=am4core.color(window.getComputedStyle(document.getElementById("css-ref-ele-1"),null).getPropertyValue("color")),chart.zoomOutButton.icon.strokeWidth=2,chart.zoomOutButton.background.states.getKey("hover").properties.fill=am4core.color(window.getComputedStyle(document.getElementById("css-ref-ele-3"),null).getPropertyValue("background-color"))}}function setAxisColorProperties(e){e.setStroke(am4core.color(window.getComputedStyle(document.getElementById("css-ref-ele-0"),null).getPropertyValue("color"))),e.strokeWidth=0,e.setFill(am4core.color(window.getComputedStyle(document.getElementById("css-ref-ele-0"),null).getPropertyValue("color"))),e.renderer.grid.template.stroke=am4core.color(window.getComputedStyle(document.getElementById("css-ref-ele-0"),null).getPropertyValue("border-color")),e.renderer.grid.template.strokeWidth=1,e.renderer.grid.template.strokeOpacity=.5}function createANewSeries(e,t){const r=chart.series.push(new am4charts.LineSeries);return r.dataFields.valueX="t",r.dataFields.valueY=e,r.strokeWidth=2,r.name=t,r.tooltipText="{t}",r}let chart;const settings={isChartReady:!1,showImg:!1,limitData:1e3,mSettings:{}};let inData;onmessage=function(e){e.data.d&&settings.isChartReady&&updateData(e.data.d),e.data.r&&settings.isChartReady&&prepareScope(),e.data.c&&(settings.showImg!==e.data.c.Parameters.showIm.Value[0][0]&&(settings.showImg=e.data.c.Parameters.showIm.Value[0][0],adjustImagSeriesView()),settings.limitData=JSON.parse(e.data.c.Parameters.limitData.Value)[0][0],document.title=e.data.c.Name),e.data.s&&(settings.mSettings=e.data.s,prepareColors())},am4core.ready(function(){settings.isChartReady=!0,am4core.useTheme(am4themes_animated),am4core.useTheme(am4themes_kelly)});