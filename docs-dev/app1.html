<!DOCTYPE html>
<html class="theme-dark">

<head>
  <title>Uyamak Editor</title>
  <link rel="shortcut icon" type="image/x-icon" href="favicon.ico" />
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />


  <link rel="stylesheet" href="css/fonts/u57c.min.css" />
  <link rel="stylesheet" href="dependencies/fa/css/all.min.css" />
  <link rel="stylesheet" href="css/themes.min.css" />
  <link rel="stylesheet" href="css/style.min.css" />
  <link rel="stylesheet" href="dependencies/noty/noty.css" />
  <link rel="stylesheet" href="dependencies/noty/themes/nest.css" />


</head>

<body>
  <div id="GraphForCopyPaste" style="display:none;"></div>
  <div id="waitForProcessToFinish">
    <div>
      <div id="DOMWaitingAnimation">
        <i class="fas fa-cog fa-spin fa-2x"></i>
      </div>
      <div id="DOMWaitingHead">
        Please wait ...
      </div>
      <div id="DOMWaitingDesc">
        <i>
          If it takes longer than 2 minutes. Check you internet connection and try again.
        </i>
      </div>
    </div>
  </div>
  <div id="cookies-policy" class="modal" v-show="display">
    <div>
      <div v-html="GUIText[settings.lang].cPolicyText"></div>
      <div class="center gen-btn" v-html="GUIText[settings.lang].cPolicyLink"></div>
      <div class="center gen-btn" v-html="GUIText[settings.lang].accept" @click="acceptBtn"></div>
    </div>
  </div>
  <div id="settings" class="modal" v-show="display">
    <div>
      <span class="close-btn" @click="showGUI(false)"><i class="far fa-fw fa-times-circle"></i></span>
      <h1 v-text="GUIText[settings.lang].settings"></h1>
      <div class="splitShort">
        <div class="no-col-break">
          <label v-text="GUIText[settings.lang].language"></label>
          <select v-model="settings.lang">
            <option value="en-us" v-text="GUIText[settings.lang]['en-us']"></option>
            <option value="es-mx" v-text="GUIText[settings.lang]['es-mx']"></option>
          </select>
        </div>
        <div class="no-col-break">
          <label v-text="GUIText[settings.lang].theme"></label>
          <select v-model="settings.theme">
            <option value="theme-dark" v-text="GUIText[settings.lang]['theme-dark']"></option>
            <option value="theme-light" v-text="GUIText[settings.lang]['theme-light']"></option>
          </select>
        </div>
      </div>
    </div>
  </div>
  <div id="varManager" class="modal" v-show="display">
    <div>
      <span class="close-btn" @click="showGUI(false)"><i class="far fa-fw fa-times-circle"></i></span>
      <h1 v-text="GUIText[settings.lang].vManager"></h1>
      <div v-show="!showAddVar" @click="showAddVar=!showAddVar" class="gen-btn" v-text="GUIText[settings.lang].aNewVar">
      </div>
      <div v-show="showAddVar">
        <div v-text="GUIText[settings.lang].var"></div>
        <input type="text">
        <div v-text="GUIText[settings.lang].value"></div>
        <div class="row-col-btns">
          <div><i class="fas fa-fw fa-ellipsis-v"></i><br /><i class="fas fa-fw fa-plus"></i></div>
          <div><i class="fas fa-fw fa-ellipsis-v"></i><br /><i class="fas fa-fw fa-minus"></i></div>
          <div><i class="fas fa-fw fa-ellipsis-h"></i><i class="fas fa-fw fa-plus"></i></div>
          <div><i class="fas fa-fw fa-ellipsis-h"></i><i class="fas fa-fw fa-minus"></i></div>
        </div>
        <div class="splitToTwo">
          <div class="gen-btn" v-text="GUIText[settings.lang].save"></div>
          <div class="gen-btn" v-text="GUIText[settings.lang].cancel"></div>
        </div>
      </div>
      <h2 v-text="GUIText[settings.lang].variables"></h2>
      <div class="splitShort">
        <template v-for="(item, idx, i) in variables">
          <div class="no-col-break">
            <span v-text="(i+1)+'.'" class="gap-right"></span>
            <pre class="inline font-oneNhalf" v-text="idx"></pre>
            <span v-text="' $='+getVariable(item)+'$'"></span>
          </div>
        </template>
      </div>
      <h2 v-text="GUIText[settings.lang].constants"></h2>
      <div class="splitShort">
        <template v-for="(item, idx) in constants">
          <div class="no-col-break">
            <span v-text="(idx+1)+'.'" class="gap-right"></span>
            <pre class="inline font-oneNhalf" v-text="item"></pre>
            <span v-text="' $='+getConst(item)+'$'"></span>
          </div>
        </template>
      </div>
    </div>
  </div>
  <div id="main">
    <div id="tool-bar">
      <ul class="menu">
        <template v-for="(item, idx) in tools">
          <li class="dropdown">
            <a class="dropbtn" @mouseover="showStatus(item.moreInfo[lang])" @mouseleave="removeStatus()">
              <span><i :class="item.icon"></i></span>
              <span class="gap-left hide-small">{{item.text[lang]}}</span>
            </a>
            <div class="dropdown-content">
              <template v-for="(item0, idx0) in item.subMenu">
                <a :style="item0.prtBelow?'border-bottom: 1px var(--text-muted) solid':''"
                  @mouseover="showStatus(item0.moreInfo[lang])" @mouseleave="removeStatus()" @click="eval(item0.func)">
                  <span><span><i class="fa-fw" :class="item0.icon"></i></span><span class="gap-left hide-small"
                      v-text="item0.text[lang]"></span></span>
                  <span v-if="!!item0.kbShort.key" class="menuShortcut hide-medium-small">
                    <template v-if="!!item0.kbShort.ctrl">
                      <span v-text="GUIText[lang]['key_ctrl']"></span><span>+</span>
                    </template><template v-if="!!item0.kbShort.alt">
                      <span v-text="GUIText[lang]['key_alt']"></span><span>+</span>
                    </template><template v-if="!!item0.kbShort.shift">
                      <span v-text="GUIText[lang]['key_shift']"></span><span>+</span>
                    </template><span v-text="GUIText[lang][item0.kbShort.langCode]"></span>
                  </span>
                </a>
              </template>
            </div>
          </li>
        </template>
      </ul>
    </div>
    <div id="left-pane" class="pane">
      <div id="hide-button-left" class="hide-btn">
        <div><span id="hide-left-text"></span></div>
        <div>
          <i class="fas fa-angle-double-left"></i>
        </div>
      </div>
      <div id="lp-content" :key="'lp_content_'+updateCounter">
        <div class="blocks-search-bar">
          <span><i class="fas fa-fw fa-search"></i></span>
          <span>
            <input @focus="searchbarText(true)" @blur="searchbarText(false)"
              :placeholder="GUIText[settings.lang].sblocks" v-model="searchText" type="text">
            <span v-show="!!searchText" @click="searchText=''">
              <i class="fas fa-fw fa-times"></i>
            </span>
          </span>
        </div>
        <div v-show="!!searchText" @click="disp['search'] = !disp['search']; updateCounter++"
          class="category-head pointer">
          <span><i class="fas fa-fw fa-caret-right" :class="[(!!disp['search'])?'fa-rotate-90':'']">
            </i></span><span v-text="GUIText[settings.lang].sResults"></span>
        </div>
        <div v-show="!!searchText" class="category-content">
          <div v-show="disp['search']">
            <template v-for="(item0, idx0) in searchResults">
              <svg class="libraryBlock monospace" :umk_model="item0" @mouseover="showStatus(blksSummary[item0])"
                @mouseleave="removeStatus()" viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'>
                <g>
                  <rect rx='10' height='100' width='100' fill-opacity='0.15' fill='var(--text-muted)' />
                </g>
                <g stroke-linecap='round' width='100' height='100' stroke='var(--text-muted)' stroke-width='10'
                  fill='none' v-html="blksSummary[item0].icon"></g>
              </svg>
            </template>
          </div>
        </div>
        <template v-for="(item, idx) in categories">
          <div @click="disp[item.id] = !disp[item.id]; updateCounter++" class="category-head pointer">
            <span><i class="fas fa-fw fa-caret-right" :class="[(!!disp[item.id])?'fa-rotate-90':'']">
              </i></span><span v-text="item.name[settings.lang]"></span>
          </div>
          <div class="category-content">
            <template v-for="(item0, idx0) in blksPerCategories[item.id]">
              <div v-show="disp[item.id]">
                <svg class="libraryBlock monospace" :umk_model="item0" @mouseover="showStatus(blksSummary[item0])"
                  @mouseleave="removeStatus()" viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'>
                  <g>
                    <rect rx='10' height='100' width='100' fill-opacity='0.15' fill='var(--text-muted)' />
                  </g>
                  <g stroke-linecap='round' width='100' height='100' stroke='var(--text-muted)' stroke-width='10'
                    fill='none' v-html="blksSummary[item0].icon"></g>
                </svg>
              </div>
            </template>
          </div>
        </template>
      </div>
    </div>
    <div id="graph">
      <div id="modelContainer"></div>
      <div id="outlineContainer" class="hide-medium-small">
      </div>

    </div>
    <div id="right-pane" class="pane">
      <div id="hide-button-right" class="hide-btn">
        <div>
          <i class="fas fa-angle-double-right"></i>
        </div>
        <div><span id="hide-right-text"></span></div>
      </div>
      <div id="rp-content">
        <div v-if="modelValue !== null">
          <div>
            <h2 class="compress" v-text="GUIText[settings.lang].name"></h2>
            <input v-model.trim="modelValue" type="text" :placeholder="GUIText[settings.lang].name+'...'" />
            <div v-html="GUIText[settings.lang].preview+': '+modelValue"></div>
          </div>
          <br>
          <div class="gen-btn" @click="applyModelValue" v-text="GUIText[settings.lang].aChanges"></div>
        </div>
        <div v-else-if="!!uyamakModel">
          <h2 class="compress" v-text="GUIText[settings.lang].label"></h2>
          <input v-model.trim="uyamakModel.Name" type="text" />
          <div v-html="GUIText[settings.lang].preview+': '+uyamakModel.Name"></div>
          <br />&shy;
          <div v-if="uyamakModel.TerminalsIn.editable">
            <h2 class="compress" v-text="GUIText[settings.lang].noOfIns"></h2>
            <input v-model.number="uyamakModel.TerminalsIn.value" type="number" v-bind:min="uyamakModel.TerminalsIn.min"
              v-bind:max="uyamakModel.TerminalsIn.max" />
            <br />&shy;
          </div>
          <div v-if="uyamakModel.TerminalsOut.editable">
            <h2 class="compress" v-text="GUIText[settings.lang].noOfOuts"></h2>
            <input v-model.number="uyamakModel.TerminalsOut.value" type="number"
              v-bind:min="uyamakModel.TerminalsOut.min" v-bind:max="uyamakModel.TerminalsOut.max" />
            <br />&shy;
          </div>
          <div v-if="Object.keys(uyamakModel.Parameters).length>0">
            <h2 class="compress" v-text="GUIText[settings.lang].params"></h2>
            <template v-for="(Parameter, index) in uyamakModel.Parameters">
              <div class="category-head" @click="toggleParamDisplay(index)" style="cursor: pointer;">
                <span :key="index+'_'+updatingCounter"><i class="fas fa-caret-right fa-fw"
                    :class="!!parametersDisplay[index]?'fa-rotate-90':''"></i></span>
                <span v-html="Parameter.Name[settings.lang]"></span>
              </div>
              <div v-if="!!parametersDisplay[index]">
                <div v-if="(Parameter.Dimension === 'Vector') || (Parameter.Dimension === 'Matrix')"
                  class="matrix-builder-buttons">
                  <span @click="valueDimensionsModify(0, index)" class="rotate-90">
                    <i class="fas fa-ellipsis-h fa-fw"></i><i class="fas fa-plus-circle fa-fw"></i>
                  </span>
                  <span @click="valueDimensionsModify(1, index)" class="rotate-90">
                    <i class="fas fa-ellipsis-h fa-fw"></i><i class="fas fa-minus-circle fa-fw  fa-rotate-90"></i>
                  </span>
                  <span v-if="(Parameter.Dimension === 'Matrix')" @click="valueDimensionsModify(2, index)">
                    <i class="fas fa-ellipsis-h fa-fw"></i><i class="fas fa-plus-circle fa-fw"></i>
                  </span>
                  <span v-if="(Parameter.Dimension === 'Matrix')" @click="valueDimensionsModify(3, index)">
                    <i class="fas fa-ellipsis-h fa-fw"></i><i class="fas fa-minus-circle fa-fw"></i>
                  </span>
                </div>
                <div class="expandable-x">
                  <table>
                    <template v-for="(rowValue, index1) in uyamakModel.Parameters[index]['Value']">
                      <tr v-if="(index1 === 0) && (Parameter.Dimension === 'Matrix')" style="padding: 0;">
                        <td></td>
                        <template v-for="(value, index2) in uyamakModel.Parameters[index]['Value'][index1]">
                          <td class="center">
                            {{ index2 + 1 }}
                          </td>
                        </template>
                      </tr>
                      <tr>
                        <td v-if="(Parameter.Dimension === 'Vector') || (Parameter.Dimension === 'Matrix')">
                          {{ index1 + 1 }}
                        </td>
                        <template v-for="(value, index2) in uyamakModel.Parameters[index]['Value'][index1]">
                          <td>
                            <input v-if="(['Integer', 'Real', 'Complex', 'Text'].indexOf(Parameter.Type))>=0"
                              v-model.trim="uyamakModel.Parameters[index]['Value'][index1][index2]"
                              v-bind:style="(Parameter.Type !== 'Text')?'text-align: right':''" type="text" />
                            <input v-if="Parameter.Type === 'Color'"
                              v-model.trim="uyamakModel.Parameters[index]['Value'][index1][index2]"
                              style="padding: 0; min-width: 75px; padding: 0px; min-height: 35px;"
                              v-bind:style="(Parameter.Type !== 'Text')?'text-align: right':''" type="color" />
                            <select v-if="Parameter.Type === 'Options'" class="w3-select w3-border-0"
                              v-model="uyamakModel.Parameters[index]['Value'][index1][index2]">
                              <template v-for="(opnName, opnVal) in uyamakModel.Parameters[index]['Options']">
                                <option v-bind:value="opnVal">{{opnName}}</option>
                              </template>
                            </select>
                          </td>
                        </template>
                      </tr>
                    </template>
                  </table>
                </div>
              </div>
            </template>
          </div>
          <div>
            <h2 class="compress" v-text="GUIText[settings.lang].functionality"></h2>
            <div style="overflow-x: auto; overflow-y: hidden;">
              <div v-html="getBlockDetails"></div>
            </div>
            <br />&shy;
            <div class="splitToTwo">
              <div class="gen-btn" v-html="GUIText[settings.lang].aChanges" @click="saveModel()"></div>
              <div class="gen-btn" v-html="GUIText[settings.lang].rChanges"
                onclick="changeEditModelWithSelectedBlock()"></div>
            </div>
            <h2 class="compress" v-text="GUIText[settings.lang].orientation"></h2>
            <div class="matrix-builder-buttons">
              <span @click="rotate(0)">
                <i class="far fa-smile"></i>
              </span>
              <span @click="rotate(90)">
                <i class="far fa-smile fa-rotate-90"></i>
              </span>
              <span @click="rotate(180)">
                <i class="far fa-smile fa-rotate-180"></i>
              </span>
              <span @click="rotate(270)">
                <i class="far fa-smile fa-rotate-270"></i>
              </span>
            </div>
          </div>
        </div>
        <div v-else>
          <h2><i class="fas fa-fw fa-border-all"></i><span class="gap-left"
              v-text="GUIText[settings.lang].gridLines"></span></h2>
          <div class="checkboxItem">
            <input type="checkbox" id="minorGridLines" v-model="rpSettings.gLinesMinor"><label for="minorGridLines"
              v-text="GUIText[settings.lang].gLinesMinor"></label>
          </div>
          <div class="checkboxItem">
            <input type="checkbox" id="majorGridLines" v-model="rpSettings.gLinesMajor"><label for="majorGridLines"
              v-text="GUIText[settings.lang].gLinesMajor"></label>
          </div>
          <div class="checkboxItem">
            <input type="checkbox" id="megaGridLines" v-model="rpSettings.gLinesMega"><label for="megaGridLines"
              v-text="GUIText[settings.lang].gLinesMega"></label>
          </div>
          <h2><i class="fas fa-fw fa-ruler-combined"></i><span class="gap-left"
              v-text="GUIText[settings.lang].gridSize"></span></h2>
          <input type="number" v-model.number="rpSettings.gridSize">
          <h2><i class="fas fa-fw fa-location-arrow"></i><span class="gap-left"
              v-text="GUIText[settings.lang].navi"></span></h2>
          <div id="graph-nav">
            <div class="gen-btn" @click="mainSystem.navigate('zoomOut')"><i class="fa-fw fas fa-search-minus"></i></div>
            <div class="gen-btn" @click="mainSystem.navigate('up')"><i class="fa-fw fas fa-caret-up"></i></div>
            <div class="gen-btn" @click="mainSystem.navigate('zoomIn')"><i class="fa-fw fas fa-search-plus"></i></div>
            <div class="gen-btn" @click="mainSystem.navigate('left')"><i class="fa-fw fas fa-caret-left"></i></div>
            <div class="gen-btn" @click="mainSystem.navigate('0')"><i class="fa-fw fas fa-arrows-alt"></i></div>
            <div class="gen-btn" @click="mainSystem.navigate('right')"><i class="fa-fw fas fa-caret-right"></i></div>
            <div class="gen-btn" @click="mainSystem.navigate('fit')"><i class="fa-fw fas  fa-expand"></i></div>
            <div class="gen-btn" @click="mainSystem.navigate('down')"><i class="fa-fw fas fa-caret-down"></i></div>
            <div class="gen-btn" @click="mainSystem.navigate('zoomActual')"><i class="fa-fw fas  fa-compress"></i></div>
          </div>
          <h2><i class="fas fa-fw fa-cogs"></i><span class="gap-left" v-text="GUIText[settings.lang].oSettings"></span>
          </h2>
          <div class="checkboxItem">
            <input type="checkbox" id="showOutline" v-model="rpSettings.showOutline"><label for="showOutline"
              v-text="GUIText[settings.lang].showOutline"></label>
          </div>
          <div class="checkboxItem">
            <input type="checkbox" id="guidesEnabled" v-model="rpSettings.guidesEnabled"><label for="guidesEnabled"
              v-text="GUIText[settings.lang].guidesEnabled"></label>
          </div>
          <div class="checkboxItem">
            <input type="checkbox" id="showLabels" v-model="rpSettings.showLabels"><label for="showLabels"
              v-text="GUIText[settings.lang].showLabels"></label>
          </div>
        </div>
      </div>
    </div>
    <div id="footer">
      <div v-html="textForHint"></div>
      <div>Status</div>
      <div>Time</div>
    </div>
    <div id="btn-blocks" class="pull-btn">
      <span style="padding-right: 10px;">
        <i class="fas fa-chevron-right"></i>
      </span>
    </div>
    <div id="btn-edit" class="pull-btn">
      <span style="padding-left: 10px;">
        <i class="fas fa-chevron-left"></i>
      </span>
    </div>
  </div>
  <script type="text/javascript" src="pre-scripts.min.js"></script>
  <script type="text/javascript" src="dependencies/mathjs/math.min.js"></script>
  <script type="text/javascript" src="dependencies/js-polyfills/polyfill.min.js"></script>
  <script type="text/javascript" src="dependencies/mathjax/tex-svg-full.js"></script>
  <script type="text/javascript" src="dependencies/noty/noty.min.js"></script>
  <script type="text/javascript" src="dependencies/vue/vue.min.js"></script>
  <script type="text/javascript" src="dependencies/mxgraph/js/mxClient.js"></script>
  <script type="text/javascript" src="dependencies/augmented-json-serialization-functions.js"></script>
  <script type="text/javascript" src="dependencies/pako/pako.min.js"></script>
  
  
  <!--Uyamak libraries-->
  <script src="lib.min.js"></script>
  <script src="script.min.js"></script>
</body>

</html>