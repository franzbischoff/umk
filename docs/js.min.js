function hideSidesOnMainSplit(t=!0,e=!0){var i=mainSplit.getSizes();e?t?mainSplit.setSizes([0,i[0]+i[1],i[2]]):mainSplit.setSizes([i[0],i[1]+i[2],0]):mainSplit.setSizes([15,60,25])}function selectionChanged(){for(var t=document.getElementsByClassName("editorDivs"),e=0;e<t.length;t++)t[e].style.display="none";0===mainSystem.graph.getSelectionCells().length&&(document.getElementById("editorForGraph").style.display="block")}function blockOnDOM(t){var e=t.getAttribute("umk_model");console.log(e);var i=document.createElement("div");i.style.border="dashed "+t.getAttribute("umk_color")+" 1px",i.style.width=t.getAttribute("umk_width")+"px",i.style.height=t.getAttribute("umk_height")+"px";var o=function(t,i,o,n,a){this.model=e,console.log(this.model);var r={x:n,y:a};if(o){var s=o.getGeometry().getPoint();r.x-=s.x,r.y-=s.y}v=t.insertVertex(t.getDefaultParent(),null,"H",n,a,50,50)};this.ds=mxUtils.makeDraggable(t,mainSystem.graph,o,i,0,0,!0,!0),this.ds.setGuidesEnabled(mainSystem.graph.graphHandler.guidesEnabled)}function holdToFinishAProcess(t=null,e=null){document.getElementById("waitForProcessToFinish").style.display=t?"block":"none",t&&(document.getElementById("DOMWaitingHead").innerText=t),e&&(document.getElementById("DOMWaitingDesc").innerText=e)}"undefined"!=typeof ResizeObserver&&new ResizeObserver(function(){void 0!==mainSystem.graph&&mainSystem.refresh()}).observe(modelContainer);var mainSplit=Split(["#flex-1","#flex-2","#flex-3"],{minSize:0,snapOffset:200,sizes:[15,60,25],gutterSize:4,onDrag:function(){void 0!==mainSystem.graph&&mainSystem.refresh()},elementStyle:function(t,e,i){return{"flex-basis":"calc("+e+"% - "+i+"px)"}},gutterStyle:function(t,e){return{"flex-basis":e+"px"}}}),iconText={icon1:"<svg viewBox='-3 -3 106 106' xmlns='http://www.w3.org/2000/svg'><defs><filter id='f0' x='-50%' y='-50%' width='200%' height='200%'><feGaussianBlur in='SourceAlpha' stdDeviation='1'/><feOffset dx='0' dy='0' result='offsetblur'/><feMerge><feMergeNode/><feMergeNode in='SourceGraphic'/></feMerge></filter><filter id='f1' x='-50%' y='-50%' width='200%' height='200%'><feOffset result='offOut' in='SourceAlpha' dx='3' dy='3' /><feGaussianBlur result='blurOut' in='offOut' stdDeviation='1' /><feBlend in='SourceGraphic' in2='blurOut' mode='normal' /></filter></defs><g><rect rx='0' height='100' width='100' y='0' x='0' stroke-width='0' fill='",icon2:"' filter='url(#f0)'/></g><g stroke-linecap='round' filter='url(#f1)' width='100' height='100' stroke='",icon3:"' stroke-width='10' fill='none'>",icon4:"</g></svg>"},umkBlockCategories=new Array,umkBlockSummary=new Array;mxBasePath="libs-others/mxgraph-4.0.4/javascript/src";var Graph=function(t){mxGraph.call(this,t),this.setPanning(!0),this.setTooltips(!1),this.htmlLabels=!0,this.rubberband=new mxRubberband(this);var e=new Object;e.foldable=0,e.overflow="hidden",e.verticalAlign="middle",e.fontColor="#fff",this.getStylesheet().putCellStyle("umk_model",e);e=new Object;e[mxConstants.STYLE_SHAPE]=mxConstants.SHAPE_SWIMLANE,e.startSize=25,e.strokeWidth=2,e.arcSize=0,this.getStylesheet().putCellStyle("umk_group",e),e=new Object,e.constituent=1,e.verticalLabelPosition="bottom",e.verticalAlign="top",e.fontColor="#000",this.getStylesheet().putCellStyle("umk_caption",e),e=new Object,e.constituent=1,e.align="center",e.verticalAlign="bottom",e.fontColor="#000",this.getStylesheet().putCellStyle("umk_EO",e),e=new Object,e.constituent=1,e.verticalAlign="middle",e.fontColor="#fff",e.labelPosition="right",e.labelWidth=15,e.align="left",e.shape="triangle",e.portConstraint="west",e.overflow="fit",this.getStylesheet().putCellStyle("umk_input",e),e=new Object,e.constituent=1,e.verticalAlign="middle",e.fontColor="#fff",e.labelPosition="left",e.labelWidth=15,e.align="right",e.shape="triangle",e.portConstraint="east",e.overflow="fit",this.getStylesheet().putCellStyle("umk_output",e),this.backDiv=document.createElement("div"),this.backDiv.style.position="absolute",this.backDiv.style.top="0px",this.backDiv.style.left="0px",this.backDiv.style.width="100%",this.backDiv.style.height="100%",this.backDiv.style.zIndex=-2,t.appendChild(this.backDiv),this.backgroundColor="#f8f8f8",this.setBackgroundColor=function(t){t||(t=this.backgroundColor),this.backDiv.style.backgroundColor=t},this.navigate={sGraph:this,move:function(t="up",e=10){var i=this.sGraph,o=i.view.getTranslate();switch(t){case"up":o.y+=e;break;case"down":o.y-=e;break;case"left":o.x+=e;break;case"right":o.x-=e;break;case"0":o.x=0,o.y=0}i.view.setTranslate(o.x,o.y),i.view.refresh()}};var i=document.createElement("canvas");i.style.position="absolute",i.style.top="0px",i.style.left="0px",i.style.pointerEvents="none",i.style.zIndex=-1,t.appendChild(i),this.grid={canvas:i,sGraph:this,minorStroke:{color:"#808080",thickness:.1,pattern:"",show:!1},majorStroke:{color:"#808080",thickness:1,pattern:"2, 2",show:!0},megaStroke:{color:"#808080",thickness:2,pattern:"20, 5, 5, 5",show:!1},repaintGrid:function(){var t=this.sGraph,e=0,i=0,o=new mxPoint,n=0,a=0,r=this.canvas.getContext("2d");if(r.clearRect(0,0,this.canvas.width,this.canvas.height),r.fillStyle="#ff0000",r.fillRect(0,0,this.canvas.width,this.canvas.height),null!=r){var s=t.getGraphBounds(),l=Math.max(s.x+s.width,t.container.clientWidth),h=Math.max(s.y+s.height,t.container.clientHeight),c=l!=n||h!=a;if(t.view.scale!=e||t.view.translate.x!=o.x||t.view.translate.y!=o.y||i!=t.gridSize||c){o=t.view.translate.clone(),e=t.view.scale,i=t.gridSize,n=l,a=h,c?(this.canvas.setAttribute("width",n),this.canvas.setAttribute("height",a)):r.clearRect(0,0,n,a);var u=o.x*e,d=o.y*e,m=t.gridSize,g=m*e,f=Math.floor((0-u)/g)*g+u,p=Math.ceil(n/g)*g,y=Math.floor((0-d)/g)*g+d,S=Math.ceil(a/g)*g;p+=Math.ceil(g),S+=Math.ceil(g);var b=Math.round(f),k=Math.round(p),v=Math.round(y),x=Math.round(S);if(this.minorStroke.show){r.strokeStyle=this.minorStroke.color,r.beginPath(),r.lineCap="round";try{r.setLineDash(JSON.parse("["+this.minorStroke.pattern+"]"))}catch(t){}r.lineWidth=this.minorStroke.thickness;for(var w=f;w<=p;w+=g){w=Math.round((w-u)/g)*g+u;var C=Math.round(w);r.moveTo(C+.5,v+.5),r.lineTo(C+.5,x+.5)}for(var M=y;M<=S;M+=g){M=Math.round((M-d)/g)*g+d;var O=Math.round(M);r.moveTo(b+.5,O+.5),r.lineTo(k+.5,O+.5)}r.closePath(),r.stroke()}if(g*=5,this.majorStroke.show){r.strokeStyle=this.majorStroke.color,f=Math.floor((0-u)/g)*g+u,p=Math.ceil(n/g)*g,y=Math.floor((0-d)/g)*g+d,S=Math.ceil(a/g)*g,p+=Math.ceil(g),S+=Math.ceil(g),b=Math.round(f),k=Math.round(p),v=Math.round(y),x=Math.round(S),r.beginPath(),r.lineCap="round";try{r.setLineDash(JSON.parse("["+this.majorStroke.pattern+"]"))}catch(t){}r.lineWidth=this.majorStroke.thickness;for(w=f;w<=p;w+=g){w=Math.round((w-u)/g)*g+u;C=Math.round(w);r.moveTo(C+.5,v+.5),r.lineTo(C+.5,x+.5)}for(M=y;M<=S;M+=g){M=Math.round((M-d)/g)*g+d;O=Math.round(M);r.moveTo(b+.5,O+.5),r.lineTo(k+.5,O+.5)}r.closePath(),r.stroke()}if(g*=2,this.megaStroke.show){r.strokeStyle=this.megaStroke.color,f=Math.floor((0-u)/g)*g+u,p=Math.ceil(n/g)*g,y=Math.floor((0-d)/g)*g+d,S=Math.ceil(a/g)*g,p+=Math.ceil(g),S+=Math.ceil(g),b=Math.round(f),k=Math.round(p),v=Math.round(y),x=Math.round(S),r.beginPath(),r.lineCap="round";try{r.setLineDash(JSON.parse("["+this.megaStroke.pattern+"]"))}catch(t){}r.lineWidth=this.megaStroke.thickness;for(w=f;w<=p;w+=g){w=Math.round((w-u)/g)*g+u;C=Math.round(w);r.moveTo(C+.5,v+.5),r.lineTo(C+.5,x+.5)}for(M=y;M<=S;M+=g){M=Math.round((M-d)/g)*g+d;O=Math.round(M);r.moveTo(b+.5,O+.5),r.lineTo(k+.5,O+.5)}r.closePath(),r.stroke()}}}}}};mxUtils.extend(Graph,mxGraph);var Outline=function(t,e){mxOutline.call(this,t,e),this.visibility=!1,this.setVisiblity=function(){e.style.display=this.visibility?"block":"none"}};mxUtils.extend(Outline,mxOutline);var System=function(t,e){this.graph=new Graph(t),this.outline=new Outline(this.graph,e),this.refresh=function(){this.graph.setBackgroundColor(),this.graph.refresh(),this.outline.setVisiblity(),this.outline.refresh()},this.navigate=function(t="up"){switch(t){case"up":case"down":case"left":case"right":case"0":this.graph.navigate.move(t);break;case"zoomIn":this.graph.zoomIn();break;case"zoomOut":this.graph.zoomOut();break;case"zoomActual":this.graph.zoomActual();break;case"fit":this.graph.fit()}this.refresh()}},mainSystem=new System(document.getElementById("modelContainer"),document.getElementById("outlineContainer"));mainSystem.graph.getSelectionModel().addListener(mxEvent.CHANGE,function(t,e){selectionChanged()}),mainSystem.outline.update=function(t){return mainSystem.graph.grid.repaintGrid(),mxOutline.prototype.update.apply(this,arguments)},mainSystem.outline.mouseDown=function(t,e){return mainSystem.graph.container.style.backgroundColor=mainSystem.graph.backgroundColor,mxOutline.prototype.mouseDown.apply(this,arguments)},mainSystem.outline.mouseUp=function(t,e){return mainSystem.graph.container.style.backgroundColor="",mxOutline.prototype.mouseUp.apply(this,arguments)};var splDraggable=function(t,e,i,o,n,a,r,s,l,h){},allTheBlocks=new Vue({el:"#allTheBlocks",data:{categories:umkBlockCategories,bSummary:umkBlockSummary,dispCategories:new Array(umkBlockCategories.length).fill(!1),updateCounter:0,blocksPerCategory:{},searchText:""},mounted:function(){this.dispCategories[0]=!0,this.updateCounter++,this.obtainBlocksPerCategory()},methods:{updateDOMs:function(){this.updateCounter++},obtainBlocksPerCategory:function(){for(var t=0;t<this.bSummary.length;t++)for(var e=0;e<this.bSummary[t].category.length;e++)""!==this.bSummary[t].category[e]&&(void 0===this.blocksPerCategory[this.bSummary[t].category[e]]&&(this.blocksPerCategory[this.bSummary[t].category[e]]=new Array),this.blocksPerCategory[this.bSummary[t].category[e]].push(this.bSummary[t]))},toggleCategoryDisplay:function(t){this.dispCategories[t]=!this.dispCategories[t],this.updateCounter++},getBlockImage:function(t){return"data:image/svg+xml;charset=utf-8,"+encodeURIComponent(iconText.icon1+t.bg+iconText.icon2+t.fg+iconText.icon3+t.icon+iconText.icon4)}},watch:{searchText:function(){this.updateCounter++},bSummary:{deep:!0,handler:function(){this.obtainBlocksPerCategory(),this.updateCounter++}}},updated:function(){for(var t=document.getElementsByClassName("libraryBlock"),e=0;e<t.length;e++)new blockOnDOM(t[e])},computed:{searchResults:function(){return this.bSummary.filter(function(t){return t.name.toLowerCase().indexOf(allTheBlocks.$data.searchText.toLowerCase())>=0||t.keywords.toLowerCase().indexOf(allTheBlocks.$data.searchText.toLowerCase())>=0||t.description.toLowerCase().indexOf(allTheBlocks.$data.searchText.toLowerCase())>=0})}}}),editorForGraph=new Vue({el:"#editorForGraph",data:{graph:mainSystem.graph,outline:mainSystem.outline},mounted:function(){this.refreshGraph()},methods:{refreshGraph:function(){mainSystem.refresh()}}});MathJax.Hub.Config({showMathMenu:!1,messageStyle:"none",menuSettings:{inTabOrder:!1},extensions:["tex2jax.js"],jax:["input/TeX","output/HTML-CSS"],tex2jax:{preview:"none",inlineMath:[["$","$"],["\\(","\\)"]],displayMath:[["$$","$$"],["\\[","\\]"]]}}),holdToFinishAProcess(!1);