function hideSidesOnMainSplit(e=!0,t=!0){var r=mainSplit.getSizes();t?e?mainSplit.setSizes([0,r[0]+r[1],r[2]]):mainSplit.setSizes([r[0],r[1]+r[2],0]):mainSplit.setSizes([15,60,25])}"undefined"!=typeof ResizeObserver&&new ResizeObserver(function(){void 0!==mainSystem.graph&&mainSystem.graph.grid.repaintGrid(),"undefined"!=typeof outln&&outln.refresh()}).observe(modelContainer);var mainSplit=Split(["#flex-1","#flex-2","#flex-3"],{minSize:0,snapOffset:200,sizes:[15,60,25],gutterSize:4,onDrag:function(){void 0!==mainSystem.graph&&mainSystem.graph.grid.repaintGrid(),"undefined"!=typeof outln&&outln.refresh()},elementStyle:function(e,t,r){return{"flex-basis":"calc("+t+"% - "+r+"px)"}},gutterStyle:function(e,t){return{"flex-basis":t+"px"}}}),iconText={icon1:"<svg viewBox='-3 -3 106 106' xmlns='http://www.w3.org/2000/svg'><defs><filter id='f0' x='-50%' y='-50%' width='200%' height='200%'><feGaussianBlur in='SourceAlpha' stdDeviation='1'/><feOffset dx='0' dy='0' result='offsetblur'/><feMerge><feMergeNode/><feMergeNode in='SourceGraphic'/></feMerge></filter><filter id='f1' x='-50%' y='-50%' width='200%' height='200%'><feOffset result='offOut' in='SourceAlpha' dx='3' dy='3' /><feGaussianBlur result='blurOut' in='offOut' stdDeviation='1' /><feBlend in='SourceGraphic' in2='blurOut' mode='normal' /></filter></defs><g><rect rx='0' height='100' width='100' y='0' x='0' stroke-width='0' fill='",icon2:"' filter='url(#f0)'/></g><g stroke-linecap='round' filter='url(#f1)' width='100' height='100' stroke='",icon3:"' stroke-width='10' fill='none'>",icon4:"</g></svg>"},Graph=function(e){mxGraph.call(this,e),this.guidesEnabled=!0,this.backgroundColor="#f8f8f8",this.setBackgroundColor=function(t){t||(t=this.backgroundColor),e.style.backgroundColor=t},this.navigate={sGraph:this,move:function(e="up",t=10){var r=this.sGraph,a=r.view.getTranslate();switch(e){case"up":a.y+=t;break;case"down":a.y-=t;break;case"left":a.x+=t;break;case"right":a.x-=t;break;case"0":a.x=0,a.y=0}r.view.setTranslate(a.x,a.y),r.view.refresh()}};var t=document.createElement("canvas");t.style.position="absolute",t.style.top="0px",t.style.left="0px",e.appendChild(t),this.grid={canvas:t,sGraph:this,minorStroke:{color:"#808080",thickness:.5,pattern:"1, 1",show:!0},majorStroke:{color:"#808080",thickness:1,pattern:"2, 2",show:!0},megaStroke:{color:"#808080",thickness:2,pattern:"20, 5, 5, 5",show:!1},repaintGrid:function(){var e=this.sGraph,t=0,r=0,a=new mxPoint,i=0,o=0,n=this.canvas.getContext("2d");if(n.clearRect(0,0,this.canvas.width,this.canvas.height),null!=n){var s=e.getGraphBounds(),h=Math.max(s.x+s.width,e.container.clientWidth),l=Math.max(s.y+s.height,e.container.clientHeight),c=h!=i||l!=o;if(e.view.scale!=t||e.view.translate.x!=a.x||e.view.translate.y!=a.y||r!=e.gridSize||c){a=e.view.translate.clone(),t=e.view.scale,r=e.gridSize,i=h,o=l,c?(this.canvas.setAttribute("width",i),this.canvas.setAttribute("height",o)):n.clearRect(0,0,i,o);var u=a.x*t,d=a.y*t,m=e.gridSize,g=m*t,f=Math.floor((0-u)/g)*g+u,p=Math.ceil(i/g)*g,y=Math.floor((0-d)/g)*g+d,S=Math.ceil(o/g)*g;p+=Math.ceil(g),S+=Math.ceil(g);var k=Math.round(f),v=Math.round(p),x=Math.round(y),w=Math.round(S);if(this.minorStroke.show){n.strokeStyle=this.minorStroke.color,n.beginPath();try{n.setLineDash(JSON.parse("["+this.minorStroke.pattern+"]"))}catch(e){}n.lineWidth=this.minorStroke.thickness;for(var M=f;M<=p;M+=g){M=Math.round((M-u)/g)*g+u;var b=Math.round(M);n.moveTo(b+.5,x+.5),n.lineTo(b+.5,w+.5)}for(var C=y;C<=S;C+=g){C=Math.round((C-d)/g)*g+d;var T=Math.round(C);n.moveTo(k+.5,T+.5),n.lineTo(v+.5,T+.5)}n.closePath(),n.stroke()}if(g*=5,this.majorStroke.show){n.strokeStyle=this.majorStroke.color,f=Math.floor((0-u)/g)*g+u,p=Math.ceil(i/g)*g,y=Math.floor((0-d)/g)*g+d,S=Math.ceil(o/g)*g,p+=Math.ceil(g),S+=Math.ceil(g),k=Math.round(f),v=Math.round(p),x=Math.round(y),w=Math.round(S),n.beginPath();try{n.setLineDash(JSON.parse("["+this.majorStroke.pattern+"]"))}catch(e){}n.lineWidth=this.majorStroke.thickness;for(M=f;M<=p;M+=g){M=Math.round((M-u)/g)*g+u;b=Math.round(M);n.moveTo(b+.5,x+.5),n.lineTo(b+.5,w+.5)}for(C=y;C<=S;C+=g){C=Math.round((C-d)/g)*g+d;T=Math.round(C);n.moveTo(k+.5,T+.5),n.lineTo(v+.5,T+.5)}n.closePath(),n.stroke()}if(g*=2,this.megaStroke.show){n.strokeStyle=this.megaStroke.color,f=Math.floor((0-u)/g)*g+u,p=Math.ceil(i/g)*g,y=Math.floor((0-d)/g)*g+d,S=Math.ceil(o/g)*g,p+=Math.ceil(g),S+=Math.ceil(g),k=Math.round(f),v=Math.round(p),x=Math.round(y),w=Math.round(S),n.beginPath();try{n.setLineDash(JSON.parse("["+this.megaStroke.pattern+"]"))}catch(e){}n.lineWidth=this.megaStroke.thickness;for(M=f;M<=p;M+=g){M=Math.round((M-u)/g)*g+u;b=Math.round(M);n.moveTo(b+.5,x+.5),n.lineTo(b+.5,w+.5)}for(C=y;C<=S;C+=g){C=Math.round((C-d)/g)*g+d;T=Math.round(C);n.moveTo(k+.5,T+.5),n.lineTo(v+.5,T+.5)}n.closePath(),n.stroke()}}}}}};mxUtils.extend(Graph,mxGraph);var Outline=function(e,t){mxOutline.call(this,e,t)};mxUtils.extend(Outline,mxOutline);var System=function(e,t){this.graph=new Graph(e),this.outline=new Outline(t)},mainSystem=new System(document.getElementById("modelContainer"),document.getElementById("outlineContainer")),mxGraphViewValidateBackground=mxGraphView.prototype.validateBackground;mxGraphView.prototype.validateBackground=function(){try{mainSystem.graph.grid.repaintGrid()}catch(e){console.log(e)}return MathJax.Hub.Queue(["Typeset",MathJax.Hub]),mxGraphViewValidateBackground.apply(this,arguments)},mainSystem.graph.getSelectionModel().addListener(mxEvent.CHANGE,function(e,t){selectionChanged()});var allTheBlocks=new Vue({el:"#allTheBlocks",data:{categories:umkBlockCategories,bSummary:umkBlockSummary,dispCategories:new Array(umkBlockCategories.length).fill(!1),updateCounter:0,blocksPerCategory:{},searchText:""},mounted:function(){this.dispCategories[0]=!0,this.updateCounter++;for(var e=0;e<this.bSummary.length;e++)for(var t=0;t<this.bSummary[e].category.length;t++)""!==this.bSummary[e].category[t]&&(void 0===this.blocksPerCategory[this.bSummary[e].category[t]]&&(this.blocksPerCategory[this.bSummary[e].category[t]]=new Array),this.blocksPerCategory[this.bSummary[e].category[t]].push(this.bSummary[e]))},methods:{toggleCategoryDisplay:function(e){this.dispCategories[e]=!this.dispCategories[e],this.updateCounter++},getBlockImage:function(e){return"data:image/svg+xml;charset=utf-8,"+encodeURIComponent(iconText.icon1+e.bg+iconText.icon2+e.fg+iconText.icon3+e.icon+iconText.icon4)}},watch:{searchText:function(){this.updateCounter++}},updated:function(){for(var e=document.getElementsByClassName("tempAllLibraryBlocks");e[0];)console.log(e[0]),e[0].parentNode.removeChild(e[0]);for(var t=document.getElementsByClassName("libraryBlock"),r=0;r<t.length;r++){var a=t[r],i=document.createElement("div");i.classList.add("tempAllLibraryBlocks"),i.style.border="dashed "+a.getAttribute("umk_color")+" 1px",i.style.width=a.getAttribute("umk_width")+"px",i.style.height=a.getAttribute("umk_height")+"px";var o=mxUtils.makeDraggable(a,mainSystem.graph,function(){},i,0,0,!0,!0);o.setGuidesEnabled(mainSystem.graph.guidesEnabled)}},computed:{searchResults:function(){return this.bSummary.filter(function(e){return e.name.toLowerCase().indexOf(allTheBlocks.$data.searchText.toLowerCase())>=0||e.keywords.toLowerCase().indexOf(allTheBlocks.$data.searchText.toLowerCase())>=0||e.description.toLowerCase().indexOf(allTheBlocks.$data.searchText.toLowerCase())>=0})}}}),editorForGraph=new Vue({el:"#editorForGraph",data:{graph:mainSystem.graph},mounted:function(){this.refreshGraph()},methods:{refreshGraph:function(){mainSystem.graph.setBackgroundColor(),mainSystem.graph.refresh()}}});